# 数据库更新说明

## 问题说明
当前批量上传功能只支持基本字段（姓名、联系方式、来源），需要添加更多字段以支持完整的客户资料管理。

## 解决方案

### 1. 执行数据库更新
请在 Supabase 控制台中执行以下 SQL 语句：

1. 登录 Supabase 控制台
2. 进入你的项目
3. 点击左侧菜单的 "SQL Editor"
4. 复制并执行 `add_customer_fields.sql` 文件中的内容

### 2. 更新后的字段
执行 SQL 后，客户表将包含以下字段：

**基本字段（已存在）：**
- id (UUID, 主键)
- company_id (UUID, 公司ID)
- name (TEXT, 客户姓名)
- contact (TEXT, 联系方式)
- source (TEXT, 客户来源)
- owner_id (UUID, 负责人ID)
- created_at (TIMESTAMPTZ, 创建时间)

**新增字段：**
- age (INTEGER, 年龄)
- occupation (TEXT, 职业)
- budget_range (TEXT, 资金预算范围)
- additional_contacts (JSONB, 额外联系方式)
- notes (TEXT, 备注)
- is_deleted (BOOLEAN, 软删除标记)
- created_by (UUID, 创建人ID)
- updated_at (TIMESTAMPTZ, 更新时间)

### 3. 功能特性
- ✅ 支持完整的客户资料字段
- ✅ 批量上传功能
- ✅ 客户编辑功能
- ✅ 软删除支持
- ✅ 自动更新时间戳

### 4. 使用说明
1. 执行数据库更新后
2. 下载新的客户资料模板
3. 按模板格式填写客户信息
4. 批量上传即可成功导入

## 注意事项
- 请在生产环境执行前先在测试环境验证
- 建议在执行前备份数据库
- 执行后请测试批量上传功能是否正常
