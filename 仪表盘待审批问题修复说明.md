# 仪表盘待审批数据显示问题修复

## 问题描述
- **仪表盘概览页面**显示"待审批: 0"
- **组长工作台页面**显示"共1条待审批"，并且能看到海风1的申请
- 数据存在但统计不正确

## 问题分析
1. **数据存在**: 海风1的申请确实存在，状态为待审批
2. **统计错误**: 仪表盘概览页面的 `pendingExpenses` 统计使用了 `pendingApprovalsData.length`
3. **查询问题**: `getSubordinateExpenses` 方法可能没有正确获取到待审批的申请

## 修复内容

### 1. 增强了 `getSubordinateExpenses` 方法的调试功能
- 添加了状态过滤器的日志输出
- 当找不到指定状态记录时，会查询所有记录进行调试
- 输出更详细的查询结果信息

### 2. 创建了诊断SQL脚本
- `检查申请状态.sql` - 用于检查申请状态值和下级员工关系

## 调试步骤

### 1. 刷新页面并查看控制台
打开浏览器开发者工具，查看控制台输出：
- `getSubordinateExpenses 调试` - 查看下级员工数量
- `应用状态过滤器` - 查看状态过滤条件
- `查询结果` - 查看查询到的记录
- `所有下级申请记录` - 如果没找到指定状态，会显示所有记录

### 2. 运行SQL脚本检查数据
运行 `检查申请状态.sql` 脚本，检查：
- 申请的实际状态值
- 海风1的申请详情
- 海风的下级员工关系

## 可能的原因

### 1. 状态值不匹配
- 代码中使用 `waiting_leader`
- 数据库中可能存储的是其他值（如 `pending`, `待审批` 等）

### 2. 下级员工关系问题
- 海风1可能没有正确归属到海风组长
- `supervisor_id` 或 `team_id` 关系不正确

## 下一步
1. 刷新页面查看控制台输出
2. 运行SQL脚本检查数据
3. 根据调试信息进一步修复问题

## 预期结果
修复后，仪表盘概览页面应该正确显示"待审批: 1"，与组长工作台页面保持一致。
