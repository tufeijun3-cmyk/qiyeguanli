# 企业管理系统部署指南

## 部署步骤

### 1. 准备代码
✅ 已完成：
- 创建了 `render.yaml` 配置文件
- 创建了 `.gitignore` 文件
- 创建了 `README.md` 文档
- 检查了项目结构

### 2. 上传到Git仓库

#### 方法1：使用GitHub CLI
```bash
# 初始化Git仓库
git init

# 添加所有文件
git add .

# 提交代码
git commit -m "feat: 企业管理系统初始版本"

# 创建GitHub仓库（需要先安装GitHub CLI）
gh repo create enterprise-management-system --public

# 推送代码
git push -u origin main
```

#### 方法2：使用现有GitHub仓库
**仓库地址**: `https://github.com/tufeijun3-cmyk/qiyeguanli.git`

**访问令牌**: `请在此处填入您的GitHub Personal Access Token`

执行以下命令：
```bash
# 初始化Git仓库
git init

# 添加所有文件
git add .

# 提交代码
git commit -m "feat: 企业管理系统初始版本"

# 设置主分支
git branch -M main

# 添加远程仓库（使用访问令牌）
git remote add origin https://github.com/tufeijun3-cmyk/qiyeguanli.git

# 推送代码到远程仓库
git push -u origin main
```

**注意**: 如果推送时遇到认证问题，可以使用以下方式：
```bash
# 使用访问令牌进行认证
git remote set-url origin https://YOUR_TOKEN@github.com/tufeijun3-cmyk/qiyeguanli.git
```

### 3. Render部署

#### 步骤1：注册Render账号
1. 访问 [Render](https://render.com)
2. 使用GitHub账号注册
3. 授权GitHub仓库访问权限

#### 步骤2：创建新服务
1. 点击 "New +"
2. 选择 "Static Site"
3. 连接GitHub仓库：`tufeijun3-cmyk/qiyeguanli`

#### 步骤3：配置部署
- **Name**: `enterprise-management-system`
- **Branch**: `main`
- **Root Directory**: 留空
- **Build Command**: `npm run build`
- **Publish Directory**: `dist`

#### 步骤4：环境变量
添加以下环境变量：
- `VITE_SUPABASE_URL`: `https://bikdpdwqsfrflvplzrxy.supabase.co`
- `VITE_SUPABASE_ANON_KEY`: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJpa2RwZHdxc2ZyZmx2cGx6cnh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc1MjY3MjYsImV4cCI6MjA3MzEwMjcyNn0.O7zgDEiDiHykHf7EcRUGDTDSZ2tKJdTJie07P0kwm2Y`

#### 步骤5：部署
1. 点击 "Create Static Site"
2. 等待构建完成（大约2-3分钟）
3. 部署成功后，会获得一个URL

### 4. 域名配置（可选）
如果需要自定义域名：
1. 在Render服务设置中找到 "Custom Domains"
2. 添加你的域名
3. 按照提示配置DNS记录

## 部署后检查

### 1. 功能测试
- [ ] 用户登录/注册
- [ ] 不同角色权限
- [ ] 费用申请流程
- [ ] 客户管理功能
- [ ] 设备管理功能

### 2. 性能检查
- [ ] 页面加载速度
- [ ] 响应式设计
- [ ] 移动端适配

### 3. 安全检查
- [ ] HTTPS证书
- [ ] 环境变量安全
- [ ] 数据库权限

## 常见问题

### Q: 构建失败
A: 检查：
- Node.js版本是否为18+
- 所有依赖是否正确安装
- 环境变量是否正确设置

### Q: 页面空白
A: 检查：
- 控制台是否有错误
- 环境变量是否正确
- Supabase连接是否正常

### Q: 功能异常
A: 检查：
- 数据库表结构是否正确
- 权限设置是否正确
- 网络连接是否正常

## 维护更新

### 代码更新
```bash
# 本地修改代码后
git add .
git commit -m "fix: 修复某个问题"
git push origin main

# Render会自动重新部署
```

**仓库信息**:
- 仓库地址: `https://github.com/tufeijun3-cmyk/qiyeguanli.git`
- 访问令牌: `请在此处填入您的GitHub Personal Access Token`

### 环境变量更新
1. 在Render服务设置中修改环境变量
2. 手动触发重新部署

## 备份策略

### 数据库备份
- Supabase自动备份
- 定期导出数据

### 代码备份
- Git仓库作为主要备份
- 定期创建Release标签

## 监控告警

### 性能监控
- Render内置监控
- 可集成第三方监控服务

### 错误监控
- 建议集成Sentry等错误监控服务

## 联系支持

如遇到部署问题，请：
1. 查看Render部署日志
2. 检查GitHub Actions（如果使用）
3. 联系技术支持团队